name: Automatically Build image on tag
env:
        DOCKER_CLI_EXPERIMENTAL: enabled

on:
        push:
                tags: 
                  - v[0-9]+.[0-9]+.[0-9]+
                  - v[0-9]+.[0-9]+.[0-9]+-*

jobs:
        build:
                runs-on: ubuntu-18.04
                name: Build / Push Umbrel Dashboard on version tag
                steps:
                        - name: Setup Environment
                          run: |
                                  echo ::set-env name=TAG::${GITHUB_REF/refs\/tags\//}
                                  
                        - name: Show set environment variables
                          run: |
                                  printf "    TAG: %s\n"  "$TAG"